

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Lattice Properties &mdash; flame-utils  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="_static/frib-favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="BeamState Class" href="beamstate.html" />
    <link rel="prev" title="Tutorial" href="tutorial.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> flame-utils
          

          
          </a>

          
            
            
              <div class="version">
                0.3.10
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Lattice Properties</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#general-parameter">General parameter</a></li>
<li class="toctree-l2"><a class="reference internal" href="#beam-parameter">Beam parameter</a></li>
<li class="toctree-l2"><a class="reference internal" href="#lattice-elements">Lattice elements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#special-element">Special element</a></li>
<li class="toctree-l3"><a class="reference internal" href="#optical-element">Optical element</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#rf-cavity-data-format">Rf cavity data format</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#hard-coded-frib-cavity-models">Hard-coded FRIB cavity models</a></li>
<li class="toctree-l3"><a class="reference internal" href="#generic-rf-cavity-model">Generic rf cavity model</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#lattice-element-for-the-rf-cavity-data">Lattice element for the rf cavity data</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="beamstate.html">BeamState Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="modelflame.html">ModelFlame Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="plotlat.html">Plot function</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">Application Programming Interface</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">flame-utils</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Lattice Properties</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/element.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="lattice-properties">
<h1>Lattice Properties<a class="headerlink" href="#lattice-properties" title="Permalink to this headline">¶</a></h1>
<div class="section" id="general-parameter">
<h2>General parameter<a class="headerlink" href="#general-parameter" title="Permalink to this headline">¶</a></h2>
<p>Basic format of the general parameters are,</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>keyword1 = &quot;value1&quot;;
keyword2 = &quot;value2&quot;;
...
</pre></div>
</div>
<table class="colwidths-given docutils align-default" id="genpara">
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><div class="line-block">
<div class="line">keyword</div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line">value</div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line">description</div>
</div>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line"><strong>sim_type</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line">“MomentMatrix”</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Simulation mode. FRIB simulation uses</div>
<div class="line">the particular mode “MomentMatrix”.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><strong>MpoleLevel</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line">“0”, “1”, or “2”</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Multipole term controller for the rf cavities.</div>
<div class="line">“0” - only include focusing and defocusing effect</div>
<div class="line">“1” - include dipole terms</div>
<div class="line">“2” - include dipole and quadrupole terms</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line"><strong>EmitGrowth</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line">“0” or “1”</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Flag for cross-cavity emittance growth effect.</div>
<div class="line">“0” - False (no emittance growth)</div>
<div class="line">“1” - True (calculate emittance growth)</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><strong>HdipoleFitMode</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line">“0” or “1”</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Flag for auto-adjustment of bending element</div>
<div class="line">“0” - use “bg” or “beta” for the bending strength</div>
<div class="line">“1” - auto-adjust the bending strength</div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="beam-parameter">
<h2>Beam parameter<a class="headerlink" href="#beam-parameter" title="Permalink to this headline">¶</a></h2>
<p>Basic format of the beam parameters are,</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>keyword1 = value1;
keyword2 = [value2, value3]; # list input
...
</pre></div>
</div>
<table class="colwidths-given docutils align-default" id="beampara">
<colgroup>
<col style="width: 27%" />
<col style="width: 18%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><div class="line-block">
<div class="line">keyword</div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line">value</div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line">description</div>
</div>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line"><strong>IonEs</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line">float</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Nucleaon mass of the reference beam. [eV/u]</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><strong>IonEk</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line">float</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Initial kinetic energy of the reference beam. [eV/u]</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line"><strong>SampleFreq</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line">float</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Sampling frequency. [Hz] (default is 80.5e6 [Hz])</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><strong>IonChargeStates</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line">list of float</div>
</div>
</td>
<td><div class="line-block">
<div class="line">List of charge to mass ratios of the all charge states. [1]</div>
<div class="line">The first element is used as the reference beam.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line"><strong>NCharge</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line">list of float</div>
</div>
</td>
<td><div class="line-block">
<div class="line">List of macro weights of the all charge states. [1]</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><strong>${vector_variable}${n}</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line">vector[7]</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Initial centroid vector of the <strong>n</strong>-th charge state.</div>
<div class="line"><em>${vector_variable}</em> is defined in <a class="reference internal" href="#_CPPv46source" title="source"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">source</span></code></a>.</div>
<div class="line"><span class="math notranslate nohighlight">\([x, x', y, y', \phi, E_k, 1]\)</span> with</div>
<div class="line">[mm, rad, mm, rad, rad, MeV/u, 1]</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line"><strong>${matrix_variable}${n}</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line">vector[49]</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Flattened initial envelope matrix of the <strong>n</strong>-th charge state.</div>
<div class="line"><em>${matrix_variable}</em> is defined in <a class="reference internal" href="#_CPPv46source" title="source"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">source</span></code></a>.</div>
<div class="line">Cartisan product of <span class="math notranslate nohighlight">\([x, x', y, y', \phi, E_k, 1]^2\)</span> with</div>
<div class="line">[mm, rad, mm, rad, rad, MeV/u, 1] <span class="math notranslate nohighlight">\(^2\)</span></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><strong>Eng_Data_Dir</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line">string</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Directory path of the rf cavity data.</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">dir(path)</span></code> supports relative path.</div>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="lattice-elements">
<span id="element"></span><h2>Lattice elements<a class="headerlink" href="#lattice-elements" title="Permalink to this headline">¶</a></h2>
<p>Basic format of the one lattice element is,</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>name_of_element1: element_type, parameter1 = value1, parameter2 = value2, ... ;
</pre></div>
</div>
<p>After writing down the all lattice elements, user need to specify the lattice cell and the cell to USE.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># define the cell
name_of_cell: LINE = ( name_of_element1, name_of_element2, name_of_element3, ... );

# set the cell to USE
USE: name_of_cell;
</pre></div>
</div>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>element_type</strong></p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#_CPPv46source" title="source"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">source</span></code></a></p></td>
<td><p>Starting point of the simulation.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#_CPPv46marker" title="marker"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">marker</span></code></a></p></td>
<td><p>Marker element.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#_CPPv48stripper" title="stripper"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">stripper</span></code></a></p></td>
<td><p>Chage stripper element.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#_CPPv47tmatrix" title="tmatrix"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">tmatrix</span></code></a></p></td>
<td><p>User input transfer matrix.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#_CPPv47orbtrim" title="orbtrim"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">orbtrim</span></code></a></p></td>
<td><p>Orbit trim element.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#_CPPv45drift" title="drift"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">drift</span></code></a></p></td>
<td><p>Drift space element.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#_CPPv48solenoid" title="solenoid"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">solenoid</span></code></a></p></td>
<td><p>Solenoid magnet element.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#_CPPv410quadrupole" title="quadrupole"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">quadrupole</span></code></a></p></td>
<td><p>Magnetic quadrupole element.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#_CPPv49sextupole" title="sextupole"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">sextupole</span></code></a></p></td>
<td><p>Magnetic sextupole element.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#_CPPv45equad" title="equad"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">equad</span></code></a></p></td>
<td><p>Electrostatic quadrupole element.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#_CPPv45sbend" title="sbend"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">sbend</span></code></a></p></td>
<td><p>Magnetic bend element.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#_CPPv47edipole" title="edipole"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">edipole</span></code></a></p></td>
<td><p>Electrostatic dipole element.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#_CPPv48rfcavity" title="rfcavity"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">rfcavity</span></code></a></p></td>
<td><p>RF cavity element.</p></td>
</tr>
</tbody>
</table>
<div class="section" id="special-element">
<h3>Special element<a class="headerlink" href="#special-element" title="Permalink to this headline">¶</a></h3>
<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv46source">
<span id="_CPPv36source"></span><span id="_CPPv26source"></span><span id="source"></span><span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">source</span></span></span><a class="headerlink" href="#_CPPv46source" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Starting point of the simulation. Initial beam state parameters are set at this element.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vector_variable</strong>: string</p>
<blockquote>
<div><div class="line-block">
<div class="line">Name key of the initial centroid vector.</div>
</div>
</div></blockquote>
<p><strong>matrix_variable</strong>: string</p>
<blockquote>
<div><div class="line-block">
<div class="line">Name key of the initial envelope matrix.</div>
</div>
</div></blockquote>
</dd>
</dl>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv46marker">
<span id="_CPPv36marker"></span><span id="_CPPv26marker"></span><span id="marker"></span><span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">marker</span></span></span><a class="headerlink" href="#_CPPv46marker" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Marker element. Nothing to do.</p>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv48stripper">
<span id="_CPPv38stripper"></span><span id="_CPPv28stripper"></span><span id="stripper"></span><span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">stripper</span></span></span><a class="headerlink" href="#_CPPv48stripper" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Stripper element.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>IonChargeStates</strong>: list of float</p>
<blockquote>
<div><div class="line-block">
<div class="line">List of charge to mass ratios after the charge stripper. [1]</div>
</div>
</div></blockquote>
<p><strong>charge_model</strong>: string</p>
<blockquote>
<div><div class="line-block">
<div class="line">Macro weight model for stripper.</div>
<div class="line">- <strong>“baron” (default)</strong>: Use Baron formula for the macro weights.</div>
<div class="line">- <strong>“off”</strong>: Use <code class="docutils literal notranslate"><span class="pre">NCharge</span></code> parameter for the macro weights.</div>
</div>
</div></blockquote>
<p><strong>NCharge</strong>: list of float</p>
<blockquote>
<div><div class="line-block">
<div class="line">List of macro weights after the charge stripper. [1]</div>
<div class="line">This list length must be same as the <code class="docutils literal notranslate"><span class="pre">IonChargeStates</span></code></div>
<div class="line">This parameter is used only in the case of <code class="docutils literal notranslate"><span class="pre">charge_model</span> <span class="pre">=</span> <span class="pre">&quot;baron&quot;</span></code>.</div>
</div>
</div></blockquote>
<p><strong>Stripper_IonZ</strong>: float (optional, default is <strong>78.0/238.0</strong>)</p>
<blockquote>
<div><div class="line-block">
<div class="line">Charge to mass ratio of the reference beam. [1]</div>
</div>
</div></blockquote>
<p><strong>Stripper_IonMass</strong>: float (optional, default is <strong>238.0</strong>)</p>
<blockquote>
<div><div class="line-block">
<div class="line">Ion mass of the reference beam. [amu]</div>
</div>
</div></blockquote>
<p><strong>Stripper_IonProton</strong>: float (optional, default is <strong>92.0</strong>)</p>
<blockquote>
<div><div class="line-block">
<div class="line">Proton number of the reference beam. [1]</div>
</div>
</div></blockquote>
<p><strong>Stripper_E1Para</strong>: float (optional, default is <strong>2.8874e-3</strong>)</p>
<blockquote>
<div><div class="line-block">
<div class="line">Constant part of the energy struggling parameter of the charge stripper. [MeV/u]</div>
</div>
</div></blockquote>
<p><strong>Stripper_lambda</strong>: float (optional, default is <strong>5.5740</strong>)</p>
<blockquote>
<div><div class="line-block">
<div class="line">Momentum spread factor <span class="math notranslate nohighlight">\(\lambda\)</span> of the charge stripper. [1]</div>
</div>
</div></blockquote>
<p><strong>Stripper_upara</strong>: float (optional, default is <strong>2.6903</strong>)</p>
<blockquote>
<div><div class="line-block">
<div class="line">Momentum spread factor <span class="math notranslate nohighlight">\(U\)</span> of the charge stripper. [1]</div>
<div class="line">The momentum spread is defined as <span class="math notranslate nohighlight">\(\sqrt(U/\lambda^2)\)</span> [mrad].</div>
</div>
</div></blockquote>
<p><strong>Stripper_E0Para</strong>: vector[3] (optional, default is <strong>[16.348e6, 1.00547, -0.10681]</strong>)</p>
<blockquote>
<div><div class="line-block">
<div class="line">Energy loss parameters due to the ionization.</div>
<div class="line">[Constant_part, Energy_dependence, Thickness_depenedence] with [eV/u, 1, 1]</div>
</div>
</div></blockquote>
<p><strong>Stripper_Para</strong>: vector[3] (optional, default is <strong>[3.0, 20.0, 16.623e6]</strong>)</p>
<blockquote>
<div><div class="line-block">
<div class="line">Stripper foil parameters.</div>
<div class="line">[Thickness, Thickness_variation, reference_energy] with [um, %, eV/u]</div>
</div>
</div></blockquote>
</dd>
</dl>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv47tmatrix">
<span id="_CPPv37tmatrix"></span><span id="_CPPv27tmatrix"></span><span id="tmatrix"></span><span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">tmatrix</span></span></span><a class="headerlink" href="#_CPPv47tmatrix" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>User input transfer matrix element.</p>
<dl class="field-list">
<dt class="field-odd">Parameter</dt>
<dd class="field-odd"><p><strong>matrix</strong>: vector[49]</p>
<div class="line-block">
<div class="line">Flattened <span class="math notranslate nohighlight">\(7 \times 7\)</span> transfer matrix.</div>
</div>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="optical-element">
<h3>Optical element<a class="headerlink" href="#optical-element" title="Permalink to this headline">¶</a></h3>
<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv47orbtrim">
<span id="_CPPv37orbtrim"></span><span id="_CPPv27orbtrim"></span><span id="orbtrim"></span><span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">orbtrim</span></span></span><a class="headerlink" href="#_CPPv47orbtrim" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Orbit trim element. This can be use as steering magnet.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>realpara</strong>: int</p>
<blockquote>
<div><div class="line-block">
<div class="line">Realistic input parameter flag for the beam kick angle.</div>
<div class="line"><strong>0</strong> - use <code class="docutils literal notranslate"><span class="pre">theta_x</span></code> and <code class="docutils literal notranslate"><span class="pre">theta_y</span></code> for the beam kick.</div>
<div class="line"><strong>1</strong> - use <code class="docutils literal notranslate"><span class="pre">tm_xkick</span></code> and <code class="docutils literal notranslate"><span class="pre">tm_ykick</span></code> for the beam kick.</div>
</div>
</div></blockquote>
<p><strong>theta_x</strong>: float</p>
<blockquote>
<div><div class="line-block">
<div class="line">Horizontal beam kick angle. [rad]</div>
</div>
</div></blockquote>
<p><strong>theta_y</strong>: float</p>
<blockquote>
<div><div class="line-block">
<div class="line">Vertical beam kick angle. [rad]</div>
</div>
</div></blockquote>
<p><strong>tm_xkick</strong>: float</p>
<blockquote>
<div><div class="line-block">
<div class="line">Magnetic field strength for the horizontal beam kick. [T*m]</div>
</div>
</div></blockquote>
<p><strong>tm_ykick</strong>: float</p>
<blockquote>
<div><div class="line-block">
<div class="line">Magnetic field strength for the vertical beam kick. [T*m]</div>
</div>
</div></blockquote>
<p><strong>xyrotate</strong>: float</p>
<blockquote>
<div><div class="line-block">
<div class="line">Transverse rotation angle of the beam. [deg]</div>
</div>
</div></blockquote>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In the case of user puts both “beam kick information” and “transverse rotation angle” to the ONE orbtrim element,
the process order is, transverse rotation -&gt; beam kick. In other words, the beam kick is effected AFTER the transverse rotation.</p>
</div>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv45drift">
<span id="_CPPv35drift"></span><span id="_CPPv25drift"></span><span id="drift"></span><span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">drift</span></span></span><a class="headerlink" href="#_CPPv45drift" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Drift space element.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>L</strong>: float</p>
<div class="line-block">
<div class="line">Length of the lattice element. [m]</div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv48solenoid">
<span id="_CPPv38solenoid"></span><span id="_CPPv28solenoid"></span><span id="solenoid"></span><span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">solenoid</span></span></span><a class="headerlink" href="#_CPPv48solenoid" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Solenoid magnet element.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>L</strong>: float</p>
<blockquote>
<div><div class="line-block">
<div class="line">Length of the lattice element. [m]</div>
</div>
</div></blockquote>
<p><strong>B</strong>: float</p>
<blockquote>
<div><div class="line-block">
<div class="line">Solenoid strength (<span class="math notranslate nohighlight">\(B_z\)</span>). [T]</div>
</div>
</div></blockquote>
<p><strong>dx</strong>: float (default: 0.0)</p>
<blockquote>
<div><div class="line-block">
<div class="line">Misalignment of horizontal shift. [m]</div>
</div>
</div></blockquote>
<p><strong>dy</strong>: float (default: 0.0)</p>
<blockquote>
<div><div class="line-block">
<div class="line">Misalignment of vertical shift. [m]</div>
</div>
</div></blockquote>
<p><strong>pitch</strong>: float (default: 0.0)</p>
<blockquote>
<div><div class="line-block">
<div class="line">Misaglignment of pitch angle. [rad]</div>
</div>
</div></blockquote>
<p><strong>yaw</strong>: float (default: 0.0)</p>
<blockquote>
<div><div class="line-block">
<div class="line">Misaglignment of yaw angle. [rad]</div>
</div>
</div></blockquote>
<p><strong>roll</strong>: float (default: 0.0)</p>
<blockquote>
<div><div class="line-block">
<div class="line">Misaglignment of roll angle. [rad]</div>
</div>
</div></blockquote>
<p><strong>ncurve</strong>: int (default: 0)</p>
<blockquote>
<div><div class="line-block">
<div class="line">Number of curves for slanted and overlapped field.</div>
<div class="line">(0 means hard-edge fringe model)</div>
</div>
</div></blockquote>
<p><strong>scl_fac${n}</strong>: float (default: 0)</p>
<blockquote>
<div><div class="line-block">
<div class="line">Scaling factor of the <em>n</em>-th curve (<em>n</em> start from 0).</div>
<div class="line">Unit of scl_fac${n}*curve${n} is [T].</div>
</div>
</div></blockquote>
<p><strong>curve${n}</strong>: vector</p>
<blockquote>
<div><div class="line-block">
<div class="line"><em>n</em>-th Curve information (<em>n</em> start from 0).</div>
<div class="line">Each curve vector must have the same size.
The vector elements should be defined by the scaled strength of the element at the step.
Also, the step size is defined by “<strong>L</strong> divided by the size of <strong>curve${n}</strong>”.</div>
</div>
</div></blockquote>
<p><strong>CurveFile</strong>: string</p>
<blockquote>
<div><div class="line-block">
<div class="line">External file name for the curves, the file format is the same as <strong>curve${n}</strong>.</div>
<div class="line">e.g. <cite>curve0 = [1.0, 2.0, …];</cite></div>
<div class="line">If CurveFile is available, it overrides the <strong>curve${n}</strong>.</div>
</div>
</div></blockquote>
<p><strong>use_range</strong>: vector[2]</p>
<blockquote>
<div><div class="line-block">
<div class="line">Use range of <strong>curve${n}</strong>. Format is [start_id, end_id].</div>
</div>
</div></blockquote>
</dd>
</dl>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv410quadrupole">
<span id="_CPPv310quadrupole"></span><span id="_CPPv210quadrupole"></span><span id="quadrupole"></span><span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">quadrupole</span></span></span><a class="headerlink" href="#_CPPv410quadrupole" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Magnetic quadrupole element.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>L</strong>: float</p>
<blockquote>
<div><div class="line-block">
<div class="line">Length of the lattice element. [m]</div>
</div>
</div></blockquote>
<p><strong>B2</strong>: float</p>
<blockquote>
<div><div class="line-block">
<div class="line">Quadrupole field gradient. [T/m]</div>
<div class="line">Positive value means horizontal focusing.</div>
</div>
</div></blockquote>
<p><strong>dx</strong>, <strong>dy</strong>, <strong>pitch</strong>, <strong>yaw</strong>, <strong>roll</strong>: float</p>
<blockquote>
<div><div class="line-block">
<div class="line">Misalignment parameters. See <a class="reference internal" href="#_CPPv48solenoid" title="solenoid"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">solenoid</span></code></a> case.</div>
</div>
</div></blockquote>
<p><strong>ncurve</strong>, <strong>scl_fac${n}</strong>, <strong>curve${n}</strong>, <strong>CurveFile</strong>, <strong>use_range</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">Curve inputs for slanted and overlapped field. See <a class="reference internal" href="#_CPPv48solenoid" title="solenoid"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">solenoid</span></code></a> case.</div>
<div class="line">Unit of scl_fac${n}*curve${n} is [T/m].</div>
</div>
</div></blockquote>
</dd>
</dl>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv49sextupole">
<span id="_CPPv39sextupole"></span><span id="_CPPv29sextupole"></span><span id="sextupole"></span><span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">sextupole</span></span></span><a class="headerlink" href="#_CPPv49sextupole" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Magnetic sextupole element.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>L</strong>: float</p>
<blockquote>
<div><div class="line-block">
<div class="line">Length of the lattice element. [m]</div>
</div>
</div></blockquote>
<p><strong>B3</strong>: float</p>
<blockquote>
<div><div class="line-block">
<div class="line">Sextupole field gradient. [T/m^2]</div>
<div class="line">Positive value means horizontal focusing.</div>
</div>
</div></blockquote>
<p><strong>dstkick</strong>: bool</p>
<blockquote>
<div><div class="line-block">
<div class="line">On/off flag to calculate the centroid shift due to the 3rd order effect.</div>
<div class="line">Default is <strong>1</strong> (on).</div>
</div>
</div></blockquote>
<p><strong>step</strong>: int</p>
<blockquote>
<div><div class="line-block">
<div class="line">Step number for the sextupole element. Default is <strong>1</strong>.</div>
</div>
</div></blockquote>
<p><strong>dx</strong>, <strong>dy</strong>, <strong>pitch</strong>, <strong>yaw</strong>, <strong>roll</strong>: float</p>
<blockquote>
<div><div class="line-block">
<div class="line">Misalignment parameters. See <a class="reference internal" href="#_CPPv48solenoid" title="solenoid"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">solenoid</span></code></a> case.</div>
</div>
</div></blockquote>
</dd>
</dl>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv45equad">
<span id="_CPPv35equad"></span><span id="_CPPv25equad"></span><span id="equad"></span><span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">equad</span></span></span><a class="headerlink" href="#_CPPv45equad" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Electrostatic quadrupole element.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>L</strong>: float</p>
<blockquote>
<div><div class="line-block">
<div class="line">Length of the lattice element. [m]</div>
</div>
</div></blockquote>
<p><strong>V</strong>: float</p>
<blockquote>
<div><div class="line-block">
<div class="line">Electrostatic quadrupole pole tip voltage. [V]</div>
<div class="line">Positive value means horizontal focusing.</div>
</div>
</div></blockquote>
<p><strong>radius</strong>: float</p>
<blockquote>
<div><div class="line-block">
<div class="line">Electrostatic quadrupole pole tip radius. [m]</div>
</div>
</div></blockquote>
<p><strong>dx</strong>, <strong>dy</strong>, <strong>pitch</strong>, <strong>yaw</strong>, <strong>roll</strong>: float</p>
<blockquote>
<div><div class="line-block">
<div class="line">Misalignment parameters. See <a class="reference internal" href="#_CPPv48solenoid" title="solenoid"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">solenoid</span></code></a> case.</div>
</div>
</div></blockquote>
<p><strong>ncurve</strong>, <strong>scl_fac${n}</strong>, <strong>curve${n}</strong>, <strong>CurveFile</strong>, <strong>use_range</strong></p>
<blockquote>
<div><div class="line-block">
<div class="line">Curve inputs for slanted and overlapped field. See <a class="reference internal" href="#_CPPv48solenoid" title="solenoid"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">solenoid</span></code></a> case.</div>
<div class="line">Unit of scl_fac${n}*curve${n} is [V/m^2].</div>
</div>
</div></blockquote>
</dd>
</dl>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv45sbend">
<span id="_CPPv35sbend"></span><span id="_CPPv25sbend"></span><span id="sbend"></span><span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">sbend</span></span></span><a class="headerlink" href="#_CPPv45sbend" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Magnetic bend (dipole) element.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>L</strong>: float</p>
<blockquote>
<div><div class="line-block">
<div class="line">Length of the lattice element. [m]</div>
</div>
</div></blockquote>
<p><strong>phi</strong>: float</p>
<blockquote>
<div><div class="line-block">
<div class="line">Bend angle. [deg]</div>
</div>
</div></blockquote>
<p><strong>phi1</strong>: float</p>
<blockquote>
<div><div class="line-block">
<div class="line">Front pole face angle. [deg]</div>
</div>
</div></blockquote>
<p><strong>phi2</strong>: float</p>
<blockquote>
<div><div class="line-block">
<div class="line">Back pole face angle. [deg]</div>
</div>
</div></blockquote>
<p><strong>bg</strong>: float (optional: Used in the case of <a class="reference internal" href="#genpara"><span class="std std-ref">“HdipoleFitMode”</span></a> is <strong>0</strong>.)</p>
<blockquote>
<div><div class="line-block">
<div class="line">Lorentz <span class="math notranslate nohighlight">\(\beta \gamma\)</span> for the reference beam. [1]</div>
<div class="line">This parameter is correspond to the bend field strength.</div>
</div>
</div></blockquote>
<p><strong>dx</strong>, <strong>dy</strong>, <strong>pitch</strong>, <strong>yaw</strong>, <strong>roll</strong>: float</p>
<blockquote>
<div><div class="line-block">
<div class="line">Misalignment parameters. See <a class="reference internal" href="#_CPPv48solenoid" title="solenoid"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">solenoid</span></code></a> case.</div>
</div>
</div></blockquote>
</dd>
</dl>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv47edipole">
<span id="_CPPv37edipole"></span><span id="_CPPv27edipole"></span><span id="edipole"></span><span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">edipole</span></span></span><a class="headerlink" href="#_CPPv47edipole" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Electrostatic dipole (bend) element.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>L</strong>: float</p>
<blockquote>
<div><div class="line-block">
<div class="line">Length of the lattice element. [m]</div>
</div>
</div></blockquote>
<p><strong>phi</strong>: float</p>
<blockquote>
<div><div class="line-block">
<div class="line">Bend angle. [deg]</div>
</div>
</div></blockquote>
<p><strong>beta</strong>: float (optional: Used in the case of <a class="reference internal" href="#genpara"><span class="std std-ref">“HdipoleFitMode”</span></a> is <strong>0</strong>.)</p>
<blockquote>
<div><div class="line-block">
<div class="line">Lorentz <span class="math notranslate nohighlight">\(\beta\)</span> for the reference beam. [1]</div>
<div class="line">This parameter is correspond to the bend field strength.</div>
</div>
</div></blockquote>
<p><strong>fringe_x</strong>: float</p>
<blockquote>
<div><div class="line-block">
<div class="line">Horizontal fringe term. [rad/mm]</div>
</div>
</div></blockquote>
<p><strong>fringe_y</strong>: float</p>
<blockquote>
<div><div class="line-block">
<div class="line">Vertical fringe term. [rad/mm]</div>
</div>
</div></blockquote>
<p><strong>asymfac</strong>: float</p>
<blockquote>
<div><div class="line-block">
<div class="line">Characteristic parameter of the kinetic energy change
due to the middle point potential deviation from ground. [1]</div>
</div>
</div></blockquote>
<p><strong>spher</strong>: int</p>
<blockquote>
<div><div class="line-block">
<div class="line">Flag for the electrostatic dipole shape.</div>
<div class="line"><strong>0</strong> - cylindrical electrostatic dipole</div>
<div class="line"><strong>1</strong> - spherical electrostatic dipole</div>
</div>
</div></blockquote>
<p><strong>ver</strong>: int</p>
<blockquote>
<div><div class="line-block">
<div class="line">Flag for the bending direction.</div>
<div class="line"><strong>0</strong> - horizontal bend</div>
<div class="line"><strong>1</strong> - vertical bend</div>
</div>
</div></blockquote>
<p><strong>dx</strong>, <strong>dy</strong>, <strong>pitch</strong>, <strong>yaw</strong>, <strong>roll</strong>: float</p>
<blockquote>
<div><div class="line-block">
<div class="line">Misalignment parameters. See <a class="reference internal" href="#_CPPv48solenoid" title="solenoid"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">solenoid</span></code></a> case.</div>
</div>
</div></blockquote>
</dd>
</dl>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv48rfcavity">
<span id="_CPPv38rfcavity"></span><span id="_CPPv28rfcavity"></span><span id="rfcavity"></span><span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">rfcavity</span></span></span><a class="headerlink" href="#_CPPv48rfcavity" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>RF cavity element.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>L</strong>: float</p>
<blockquote>
<div><div class="line-block">
<div class="line">Length of the lattice element. [m]</div>
</div>
</div></blockquote>
<p><strong>cavtype</strong>: string</p>
<blockquote>
<div><div class="line-block">
<div class="line">Cavity type. Supports “Generic”, “0.041QWR”, “0.085QWR”, “0.29HWR”, and “0.53HWR”.
<a class="reference internal" href="#cavformat"><span class="std std-ref">The file format is described here.</span></a></div>
</div>
</div></blockquote>
<p><strong>f</strong>: float</p>
<blockquote>
<div><div class="line-block">
<div class="line">RF frequency of the cavity. [Hz]</div>
</div>
</div></blockquote>
<p><strong>phi</strong>: float</p>
<blockquote>
<div><div class="line-block">
<div class="line">Input phase of the cavity. [deg]</div>
</div>
</div></blockquote>
<p><strong>syncflag</strong>: int</p>
<blockquote>
<div><div class="line-block">
<div class="line">Flag for synchronous phase input (for above parameter <strong>phi</strong>).</div>
<div class="line-block">
<div class="line"><strong>0</strong> for driven phase input.</div>
<div class="line"><strong>1</strong> for synchronous phase input with complex fit model. (default)</div>
<div class="line"><strong>2</strong> for synchronous phase input with sinusoidal fit model.</div>
</div>
</div>
</div></blockquote>
<p><strong>scl_fac</strong>: float</p>
<blockquote>
<div><div class="line-block">
<div class="line">Scaling factor of the field. [1]</div>
</div>
</div></blockquote>
<p><strong>datafile</strong>: string (optional: Used in the case of <code class="docutils literal notranslate"><span class="pre">cavtype</span></code> = “Generic”)</p>
<blockquote>
<div><div class="line-block">
<div class="line">File path of the rf cavity data.</div>
</div>
</div></blockquote>
<p><strong>Rm</strong>: float (optional: Used in the case of <code class="docutils literal notranslate"><span class="pre">cavtype</span></code> = “Generic”)</p>
<blockquote>
<div><div class="line-block">
<div class="line">Characteristic radial length of the multipole expansion. [mm]</div>
</div>
</div></blockquote>
<p><strong>dx</strong>, <strong>dy</strong>, <strong>pitch</strong>, <strong>yaw</strong>, <strong>roll</strong>: float</p>
<blockquote>
<div><div class="line-block">
<div class="line">Misalignment parameters. See <a class="reference internal" href="#_CPPv48solenoid" title="solenoid"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">solenoid</span></code></a> case.</div>
</div>
</div></blockquote>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="rf-cavity-data-format">
<span id="cavformat"></span><h2>Rf cavity data format<a class="headerlink" href="#rf-cavity-data-format" title="Permalink to this headline">¶</a></h2>
<p>FLAME using Thin-Lens-Model for rf cavity calculation.
Rf cavity data is composed of “Longitudinal axis data”, “Multipole lattice data”, “Multipole field data”, and “TTF fitting data”.</p>
<div class="section" id="hard-coded-frib-cavity-models">
<h3>Hard-coded FRIB cavity models<a class="headerlink" href="#hard-coded-frib-cavity-models" title="Permalink to this headline">¶</a></h3>
<p>For typical rf cavity in FRIB, the “TTF fitting data” is hard-coded in FLAME.
Following files are required for each rf cavity type.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>cavtype</strong></p></th>
<th class="head"><p><strong>Longitudinal axis data</strong></p></th>
<th class="head"><p><strong>Multipole lattice data</strong></p></th>
<th class="head"><p><strong>Multipole field data</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>“0.041QWR”</p></td>
<td><p>“axisData_41.txt”</p></td>
<td><p>“Multipole41/thinlenlon_41.txt”</p></td>
<td><p>“Multipole41/CaviMlp_41.txt”</p></td>
</tr>
<tr class="row-odd"><td><p>“0.085QWR”</p></td>
<td><p>“axisData_85.txt”</p></td>
<td><p>“Multipole85/thinlenlon_85.txt”</p></td>
<td><p>“Multipole85/CaviMlp_85.txt”</p></td>
</tr>
<tr class="row-even"><td><p>“0.29HWR”</p></td>
<td><p>“axisData_29.txt”</p></td>
<td><p>“Multipole29/thinlenlon_29.txt”</p></td>
<td><p>“Multipole29/CaviMlp_29.txt”</p></td>
</tr>
<tr class="row-odd"><td><p>“0.53HWR”</p></td>
<td><p>“axisData_53.txt”</p></td>
<td><p>“Multipole53/thinlenlon_53.txt”</p></td>
<td><p>“Multipole53/CaviMlp_53.txt”</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="generic-rf-cavity-model">
<h3>Generic rf cavity model<a class="headerlink" href="#generic-rf-cavity-model" title="Permalink to this headline">¶</a></h3>
<p>FLAME supports <em>lattice format</em> input for the generic rf cavity model.</p>
<p>The basic format of the rf cavity data is similar to the main lattice file,</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Rm = value1;

Ez = [
z1, Ez1,
z2, Ez2,
z3, Ez3,
...
];

name_of_element1: element_type, parameter1 = value1, parameter2 = value2, ... ;
...

cell: LINE =(name_of_element1, ...);
USE: cell;
</pre></div>
</div>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><div class="line-block">
<div class="line">keyword</div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line">value</div>
</div>
</th>
<th class="head"><div class="line-block">
<div class="line">description</div>
</div>
</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="line-block">
<div class="line"><strong>Rm</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line">float</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Characteristic radial length of the multipole expansion. [mm]</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><strong>Ez</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line">vector[2*n]</div>
</div>
</td>
<td><div class="line-block">
<div class="line">On axis <span class="math notranslate nohighlight">\(E_z\)</span> data.</div>
<div class="line">The odd index (1,3,5,…) is z position. [mm]</div>
<div class="line">The even index (2,4,6,…) is Electric field strength. [V/m]</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line"><strong>RefNorm</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line">float</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Reference normalization factor for complex synchronous phase definition.</div>
<div class="line">This value is defined by <span class="math notranslate nohighlight">\(q A/m\)</span> where <span class="math notranslate nohighlight">\(A\)</span> is the scaling factor of the 3D EM field.</div>
<div class="line">If <strong>RefNorm</strong> or <strong>SyncFit</strong> are not defined, sinusoidal model is used for the synchronous phase definition.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><strong>SyncFit</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line">vector[5*n]</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Fitting parameters for complex synchronous phase definition.</div>
<div class="line">The fitting model is shown <a class="reference internal" href="#ttfnote"><span class="std std-ref">here</span></a>.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="line-block">
<div class="line"><strong>EnergyLimit</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line">vector[2]</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Lower and higher limit for incident energy. [MeV]</div>
<div class="line">This value is used for warning signs only.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="line-block">
<div class="line"><strong>NormLimit</strong></div>
</div>
</td>
<td><div class="line-block">
<div class="line">vector[2]</div>
</div>
</td>
<td><div class="line-block">
<div class="line">Lower and higher limit for normalization factor.</div>
<div class="line">This value is used for warning signs only.</div>
</div>
</td>
</tr>
</tbody>
</table>
<div class="section" id="lattice-element-for-the-rf-cavity-data">
<h4>Lattice element for the rf cavity data<a class="headerlink" href="#lattice-element-for-the-rf-cavity-data" title="Permalink to this headline">¶</a></h4>
<p>Drift space is the same format as the main lattice but unit of <code class="docutils literal notranslate"><span class="pre">L</span></code> is [mm] - <a class="reference internal" href="#_CPPv45drift" title="drift"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">drift</span></code></a></p>
<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv47EDipole">
<span id="_CPPv37EDipole"></span><span id="_CPPv27EDipole"></span><span id="EDipole"></span><span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">EDipole</span></span></span><a class="headerlink" href="#_CPPv47EDipole" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Dipole term generated by the electric field.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>L</strong>: float</p>
<blockquote>
<div><div class="line-block">
<div class="line">Length of the lattice element. [mm]</div>
<div class="line">This parameter should be 0.0 in Thin-Lens-Model.</div>
</div>
</div></blockquote>
<p><strong>V0</strong>: float</p>
<blockquote>
<div><div class="line-block">
<div class="line">Amplitude of the multipole term. [MV]</div>
</div>
</div></blockquote>
<p><strong>attr</strong>: vector[20]</p>
<blockquote>
<div><div class="line-block">
<div class="line">TTF fitting parameter. <a class="reference internal" href="#ttfnote"><span class="std std-ref">(see here)</span></a></div>
<div class="line">1 to 10 - fitting parameter for <span class="math notranslate nohighlight">\(T\)</span></div>
<div class="line">11 to 20 - fitting parameter for <span class="math notranslate nohighlight">\(S\)</span></div>
</div>
</div></blockquote>
</dd>
</dl>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv46EFocus">
<span id="_CPPv36EFocus"></span><span id="_CPPv26EFocus"></span><span id="EFocus"></span><span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">EFocus</span></span></span><a class="headerlink" href="#_CPPv46EFocus" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Constant focusing term generated by the electric field.</p>
<p>Parameters are the same as <a class="reference internal" href="#_CPPv47EDipole" title="EDipole"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">EDipole</span></code></a>.</p>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv45EQuad">
<span id="_CPPv35EQuad"></span><span id="_CPPv25EQuad"></span><span id="EQuad"></span><span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">EQuad</span></span></span><a class="headerlink" href="#_CPPv45EQuad" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Quadrupole term generated by the electric field.</p>
<p>Parameters are the same as <a class="reference internal" href="#_CPPv47EDipole" title="EDipole"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">EDipole</span></code></a>.</p>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv45HMono">
<span id="_CPPv35HMono"></span><span id="_CPPv25HMono"></span><span id="HMono"></span><span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">HMono</span></span></span><a class="headerlink" href="#_CPPv45HMono" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Dipole term generated by the magnetic field.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>L</strong>: float</p>
<blockquote>
<div><div class="line-block">
<div class="line">Length of the lattice element. [mm]</div>
<div class="line">This parameter should be 0.0 in Thin-Lens-Model.</div>
</div>
</div></blockquote>
<p><strong>V0</strong>: float</p>
<blockquote>
<div><div class="line-block">
<div class="line">Amplitude of the multipole term. [MA]</div>
</div>
</div></blockquote>
<p><strong>attr</strong>: vector[20]</p>
<blockquote>
<div><div class="line-block">
<div class="line">TTF fitting parameter. <a class="reference internal" href="#ttfnote"><span class="std std-ref">(see here)</span></a></div>
<div class="line">1 to 10 - fitting parameter for <span class="math notranslate nohighlight">\(T\)</span></div>
<div class="line">11 to 20 - fitting parameter for <span class="math notranslate nohighlight">\(S\)</span></div>
</div>
</div></blockquote>
</dd>
</dl>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv46HFocus">
<span id="_CPPv36HFocus"></span><span id="_CPPv26HFocus"></span><span id="HFocus"></span><span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">HFocus</span></span></span><a class="headerlink" href="#_CPPv46HFocus" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Constant focusing term generated by the magnetic field.</p>
<p>Parameters are the same as <a class="reference internal" href="#_CPPv45HMono" title="HMono"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">HMono</span></code></a>.</p>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv45HQuad">
<span id="_CPPv35HQuad"></span><span id="_CPPv25HQuad"></span><span id="HQuad"></span><span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">HQuad</span></span></span><a class="headerlink" href="#_CPPv45HQuad" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Quadrupole term generated by the magnetic field.</p>
<p>Parameters are the same as <a class="reference internal" href="#_CPPv45HMono" title="HMono"><code class="xref cpp cpp-type docutils literal notranslate"><span class="pre">HMono</span></code></a>.</p>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv46AccGap">
<span id="_CPPv36AccGap"></span><span id="_CPPv26AccGap"></span><span id="AccGap"></span><span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">AccGap</span></span></span><a class="headerlink" href="#_CPPv46AccGap" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Acceleration gap term by the longitudinal electric field.</p>
<dl class="field-list">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>L</strong>: float</p>
<blockquote>
<div><div class="line-block">
<div class="line">Length of the lattice element. [mm]</div>
<div class="line">This parameter should be 0.0 in Thin-Lens-Model.</div>
</div>
</div></blockquote>
<p><strong>V0</strong>: float</p>
<blockquote>
<div><div class="line-block">
<div class="line">Amplitude of the multipole term. [MV]</div>
</div>
</div></blockquote>
<p><strong>attr</strong>: vector[23]</p>
<blockquote>
<div><div class="line-block">
<div class="line">TTF fitting parameter. <a class="reference internal" href="#ttfnote"><span class="std std-ref">(see here)</span></a></div>
<div class="line">1 to 10 - fitting parameter for <span class="math notranslate nohighlight">\(T\)</span></div>
<div class="line">11 to 20 - fitting parameter for <span class="math notranslate nohighlight">\(S\)</span></div>
<div class="line">21 to 23 - fitting parameter for the synchronous phase</div>
</div>
</div></blockquote>
</dd>
</dl>
</dd></dl>

<div class="admonition note" id="ttfnote">
<p class="admonition-title">Note</p>
<p>FLAME is using TTF-calculation acceleration technique to boost cavity modeling speed.
TTF factor <span class="math notranslate nohighlight">\(T\)</span> and <span class="math notranslate nohighlight">\(S\)</span> are pre-calculated and fitted using 9th order polynomial function according
to different particle phase speed <span class="math notranslate nohighlight">\(k\)</span>. <span class="math notranslate nohighlight">\(n\)</span>-th fitting parameter <span class="math notranslate nohighlight">\(p_n\)</span> is listed as,</p>
<div class="math notranslate nohighlight">
\[T(k), S(k) = \sum^9_{n=0} p_n k^{(9-n)}.\]</div>
<p>The driven-phase calculation is also boosted by using fitting model for the energy gain curve.</p>
<p>For the sinusoidal fitting model, the phase transferring factor <span class="math notranslate nohighlight">\(\varphi_c\)</span> is fitted by using</p>
<div class="math notranslate nohighlight">
\[\varphi_c = p_0 E^{p_1} + p_2.\]</div>
<p>Here, <span class="math notranslate nohighlight">\(E\)</span> is the kinetic energy and <span class="math notranslate nohighlight">\(p_{i = 0, 1, 2}\)</span> are the fitting parameters.</p>
<p>For other complex models (e.g. peak-base model), the phase transferring factor depends on the normalization factor <span class="math notranslate nohighlight">\(g = q A/m\)</span> where <span class="math notranslate nohighlight">\(A\)</span> is the scaling factor of the 3D EM field. The fitting model for <span class="math notranslate nohighlight">\(\varphi_c\)</span> is,</p>
<div class="math notranslate nohighlight">
\[\varphi_c = \sum_{i=0}^n (p_{5i} E^{p_{5i+1}} + p_{5i+2} \ln(E) + p_{5i+3}e^E + p_{5i+4})\times g^i .\]</div>
<p>Here, user can determine <span class="math notranslate nohighlight">\(n\)</span> value corresponds to the size of <strong>SyncFit</strong>.</p>
<p>The driven phase <span class="math notranslate nohighlight">\(\varphi_d\)</span> is calculated by using <span class="math notranslate nohighlight">\(\varphi_c\)</span>,</p>
<div class="math notranslate nohighlight">
\[\varphi_d = \varphi_s - \varphi_c - m \varphi_\text{abs}\]</div>
<p>where, <span class="math notranslate nohighlight">\(\varphi_s\)</span> is the synchronous phase in input, <span class="math notranslate nohighlight">\(\varphi_\text{abs}\)</span>
is absolute phase in front of the rf cavity, and <span class="math notranslate nohighlight">\(m\)</span> is the harmonic number.</p>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="beamstate.html" class="btn btn-neutral float-right" title="BeamState Class" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="tutorial.html" class="btn btn-neutral float-left" title="Tutorial" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2018-2020, Facility for Rare Isotope Beams, Michigan State University.
      <span class="lastupdated">
        Last updated on May 28, 2021.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>